import{t as _,h}from"./helperMixin.d068c683.js";import{d as v,r,_ as b,m as p,q as P,s as a,f as l,y as T,z as d,p as t,ap as m,x as u,aE as q,av as Q,n as g,F as M,at as A,u as D,aw as F,ax as K,A as N,B as E}from"./index.0ecf3f3d.js";import{Q as f}from"./QSeparator.274b040b.js";import{C as c,Q as L,a as B,b as I}from"./ClosePopup.9b68f329.js";import{Q as R}from"./QList.0469fa79.js";import{Q as G}from"./QMarkupTable.84b614ab.js";import{x as z,c as $,d as U,Q as k,y as H,b as O}from"./dashBoardStore.07acd552.js";import{Q as i}from"./QInput.9f84b131.js";import{Q as J}from"./QCheckbox.97917492.js";import"./axios.ab682c6b.js";const W=v({el:"#app",mixins:[_,h],methods:{async createOrg(){this.org.type="management",await this.useOrgStore.createOrg(this.org)}},setup(){return{useOrgStore:z(),org:r({}),plan_list:r([{}])}}}),X={class:"row"},Y=t("div",{class:"col-1"},null,-1),Z={class:"col-10"},x=t("div",{class:"col-1"},null,-1),ee={class:"row"},le=t("div",{class:"col-1"},null,-1),se={class:"col-4"},te=t("div",{class:"col-2"},null,-1),oe={class:"col-4"},ae=t("div",{class:"col-1"},null,-1),ne={class:"row"},re=t("div",{class:"col-1"},null,-1),de={class:"col-4"},ie=t("div",{class:"col-2"},null,-1),ue={class:"col-4"},pe=t("div",{class:"col-1"},null,-1);function me(e,s,y,V,w,C){return p(),P(k,{style:{width:"700px",height:"310px"}},{default:a(()=>[l($,null,{default:a(()=>[T(d(e.$t("popups.create_mngm")),1)]),_:1}),l(f),l($,null,{default:a(()=>[t("div",X,[Y,t("div",Z,[l(i,{modelValue:e.org.name,"onUpdate:modelValue":s[0]||(s[0]=o=>e.org.name=o),label:e.$t("name")},null,8,["modelValue","label"])]),x]),t("div",ee,[le,t("div",se,[l(i,{modelValue:e.org.street,"onUpdate:modelValue":s[1]||(s[1]=o=>e.org.street=o),label:e.$t("street")},null,8,["modelValue","label"])]),te,t("div",oe,[l(i,{modelValue:e.org.plz,"onUpdate:modelValue":s[2]||(s[2]=o=>e.org.plz=o),label:e.$t("plz")},null,8,["modelValue","label"])]),ae]),t("div",ne,[re,t("div",de,[l(i,{modelValue:e.org.city,"onUpdate:modelValue":s[3]||(s[3]=o=>e.org.city=o),label:e.$t("city")},null,8,["modelValue","label"])]),ie,t("div",ue,[l(i,{modelValue:e.org.country,"onUpdate:modelValue":s[4]||(s[4]=o=>e.org.country=o),label:e.$t("country")},null,8,["modelValue","label"])]),pe])]),_:1}),l(f),l(U,{style:{"margin-left":"35%"}},{default:a(()=>[m(l(u,{label:e.$t("cancel")},null,8,["label"]),[[c,-1]]),m(l(u,{color:"primary",label:e.$t("create"),onClick:s[5]||(s[5]=o=>e.createOrg())},null,8,["label"]),[[c,-1]])]),_:1})]),_:1})}var ce=b(W,[["render",me]]);const $e=v({el:"#app",mixins:[_,h],props:{organisation:{type:Object,default:{}}},mounted(){this.user.is_admin=!1,this.user.org_id=this.organisation.id},methods:{async createOrg(){await this.useUserStore.createUser(this.user)}},setup(){return{useUserStore:H(),is_admin:r(!1),user:r({})}}}),fe={class:"row"},ge=t("div",{class:"col-1"},null,-1),_e={class:"col-4"},he=t("div",{class:"col-1"},null,-1),ve={class:"col-4"},be=t("div",{class:"col-1"},null,-1),ye={class:"row"},Ve=t("div",{class:"col-1"},null,-1),we={class:"col-4"},Ce=t("div",{class:"col-1"},null,-1),Oe={class:"col-4"},Qe={class:"col-1"};function Ue(e,s,y,V,w,C){return p(),P(k,{style:{width:"700px",height:"260px"}},{default:a(()=>[l($,null,{default:a(()=>[T(d(e.$t("popups.create_user")),1)]),_:1}),l(f),l($,null,{default:a(()=>[t("div",fe,[ge,t("div",_e,[l(i,{modelValue:e.user.first_name,"onUpdate:modelValue":s[0]||(s[0]=o=>e.user.first_name=o),label:e.$t("first_name")},null,8,["modelValue","label"])]),he,t("div",ve,[l(i,{modelValue:e.user.last_name,"onUpdate:modelValue":s[1]||(s[1]=o=>e.user.last_name=o),label:e.$t("last_name")},null,8,["modelValue","label"])]),be]),t("div",ye,[Ve,t("div",we,[l(i,{modelValue:e.user.email,"onUpdate:modelValue":s[2]||(s[2]=o=>e.user.email=o),label:e.$t("email")},null,8,["modelValue","label"])]),Ce,t("div",Oe,[l(i,{type:"password",modelValue:e.user.password,"onUpdate:modelValue":s[3]||(s[3]=o=>e.user.password=o),label:e.$t("password")},null,8,["modelValue","label"])]),t("div",Qe,[l(J,{style:{"margin-top":"20px","margin-left":"15px"},modelValue:e.user.is_admin,"onUpdate:modelValue":s[4]||(s[4]=o=>e.user.is_admin=o),dense:"",flat:"","toggle-indeterminate":!1,label:e.user.is_admin?e.$t("admin"):e.$t("user")},null,8,["modelValue","label"])])])]),_:1}),l(f),l(U,{style:{"margin-left":"35%"}},{default:a(()=>[m(l(u,{label:e.$t("cancel")},null,8,["label"]),[[c,-1]]),m(l(u,{color:"primary",label:e.$t("create"),onClick:s[5]||(s[5]=o=>e.createOrg())},null,8,["label"]),[[c,-1]])]),_:1})]),_:1})}var ke=b($e,[["render",Ue]]);const Se=v({el:"#app",mixins:[_,h],components:{CreateOrgPop:ce,CreateUserPop:ke},mounted(){this.getOrgData()},methods:{async getOrgData(){await this.useorgStore.getOrgsFromServer("4")},async deleteOrg(){await this.useorgStore.deleteOrg(this.selected_org)},openOrgMenu(e){this.$router.push("/client/"+e.id)}},setup(){const e=z(),{organisations:s}=q(e);return{useorgStore:e,organisations:s,sub_id:r(""),org_id:r(""),selected_org:r({}),openCreateMenu:r(!1),currentOrg:r({}),create_user:r(!1),confirmDelete:r(!1)}}}),Me=e=>(N("data-v-db9895e0"),e=e(),E(),e),De={class:"",style:{margin:"20px"}},Be={class:"row",style:{"margin-bottom":"10px"}},Ie=Me(()=>t("div",{class:"col-11"},null,-1)),Pe={class:"text-left table-header"},Te={class:"text-center table-header"},ze={class:"text-right table-header"},je=["onClick"],qe={class:"text-left"},Ae={class:"text-center"},Fe={class:"text-right"},Ke={class:"text-green-14"},Ne={class:"text-red-14"},Ee={class:"q-ml-sm"};function Le(e,s,y,V,w,C){const o=Q("CreateOrgPop"),j=Q("CreateUserPop");return p(),g(M,null,[t("div",De,[t("div",Be,[Ie,l(u,{class:"col-1",color:"primary",label:e.$t("create"),onClick:s[0]||(s[0]=n=>e.openCreateMenu=!0)},null,8,["label"])]),l(G,{flat:"",class:"sticky-column-for-table q-table-seperator",style:{"max-height":"80vh",overflow:"auto"},dense:""},{default:a(()=>[t("thead",null,[t("tr",null,[t("th",Pe,d(e.$t("name")),1),t("th",Te,d(e.$t("org_type")),1),t("th",ze,d(e.$t("actions")),1)])]),t("tbody",null,[(p(!0),g(M,null,A(e.organisations,n=>(p(),g("tr",{key:n,onClick:S=>e.openOrgMenu(n)},[t("td",qe,d(n.name),1),t("td",Ae,d(e.$t("management")),1),t("td",Fe,[l(u,{flat:"",dense:"",round:"",onClick:s[1]||(s[1]=K(()=>{},["stop","prevent"])),icon:"more_horiz"},{default:a(()=>[l(L,{persistent:"","auto-close":"","transition-show":"jump-down","transition-hide":"jump-up",anchor:"bottom middle",self:"top middle"},{default:a(()=>[l(R,{dense:"",style:{"min-width":"100px"}},{default:a(()=>[l(f,{inset:""}),l(B,{clickable:""},{default:a(()=>[l(I,{onClick:S=>{e.selected_org=n,e.create_user=!0}},{default:a(()=>[t("span",Ke,d(e.$t("create_user")),1)]),_:2},1032,["onClick"])]),_:2},1024),l(B,{clickable:""},{default:a(()=>[l(I,{onClick:S=>{e.selected_org=n,e.confirmDelete=!0}},{default:a(()=>[t("span",Ne,d(e.$t("delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)])],8,je))),128))])]),_:1})]),l(O,{modelValue:e.openCreateMenu,"onUpdate:modelValue":s[2]||(s[2]=n=>e.openCreateMenu=n),onKeydown:s[3]||(s[3]=D(n=>e.openCreateMenu=!1,["esc"])),persistent:""},{default:a(()=>[l(o)]),_:1},8,["modelValue"]),l(O,{modelValue:e.create_user,"onUpdate:modelValue":s[4]||(s[4]=n=>e.create_user=n),onKeydown:s[5]||(s[5]=D(n=>e.create_user=!1,["esc"])),persistent:""},{default:a(()=>[l(j,{organisation:e.selected_org},null,8,["organisation"])]),_:1},8,["modelValue"]),l(O,{modelValue:e.confirmDelete,"onUpdate:modelValue":s[7]||(s[7]=n=>e.confirmDelete=n),persistent:""},{default:a(()=>[l(k,null,{default:a(()=>[l($,{class:"row",style:{"justify-content":"center",display:"flex"}},{default:a(()=>[l(F,{icon:"warning",color:"primary","text-color":"white"})]),_:1}),l($,{class:"row items-center"},{default:a(()=>[t("span",Ee,d(e.$t("popups.msg_delete")),1)]),_:1}),l(U,{align:"right"},{default:a(()=>[m(l(u,{flat:"",label:e.$t("cancel"),color:"primary"},null,8,["label"]),[[c]]),m(l(u,{flat:"",label:e.$t("done"),color:"primary",onClick:s[6]||(s[6]=n=>e.deleteOrg())},null,8,["label"]),[[c]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}var Re=b(Se,[["render",Le],["__scopeId","data-v-db9895e0"]]);const Ge=v({el:"#app",mixins:[_,h],components:{OrgTable:Re},methods:{},setup(){return{}}});function He(e,s,y,V,w,C){const o=Q("OrgTable");return p(),g("div",null,[l(o)])}var ol=b(Ge,[["render",He]]);export{ol as default};
