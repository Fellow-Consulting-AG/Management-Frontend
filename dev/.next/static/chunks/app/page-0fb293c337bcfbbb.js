(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{709:(e,r,t)=>{"use strict";function s(e,r){let t;try{t=e()}catch(e){return}return{getItem:e=>{var s;let n=e=>null===e?null:JSON.parse(e,null==r?void 0:r.reviver),i=null!=(s=t.getItem(e))?s:null;return i instanceof Promise?i.then(n):n(i)},setItem:(e,s)=>t.setItem(e,JSON.stringify(s,null==r?void 0:r.replacer)),removeItem:e=>t.removeItem(e)}}t.d(r,{KU:()=>s,Zr:()=>i});let n=e=>r=>{try{let t=e(r);if(t instanceof Promise)return t;return{then:e=>n(e)(t),catch(e){return this}}}catch(e){return{then(e){return this},catch:r=>n(r)(e)}}},i=(e,r)=>(t,i,o)=>{let a,l={storage:s(()=>localStorage),partialize:e=>e,version:0,merge:(e,r)=>({...r,...e}),...r},d=!1,u=new Set,m=new Set,c=l.storage;if(!c)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),t(...e)},i,o);let h=()=>{let e=l.partialize({...i()});return c.setItem(l.name,{state:e,version:l.version})},v=o.setState;o.setState=(e,r)=>{v(e,r),h()};let b=e((...e)=>{t(...e),h()},i,o);o.getInitialState=()=>b;let g=()=>{var e,r;if(!c)return;d=!1,u.forEach(e=>{var r;return e(null!=(r=i())?r:b)});let s=(null==(r=l.onRehydrateStorage)?void 0:r.call(l,null!=(e=i())?e:b))||void 0;return n(c.getItem.bind(c))(l.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===l.version)return[!1,e.state];if(l.migrate){let r=l.migrate(e.state,e.version);return r instanceof Promise?r.then(e=>[!0,e]):[!0,r]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var r;let[s,n]=e;if(t(a=l.merge(n,null!=(r=i())?r:b),!0),s)return h()}).then(()=>{null==s||s(a,void 0),a=i(),d=!0,m.forEach(e=>e(a))}).catch(e=>{null==s||s(void 0,e)})};return o.persist={setOptions:e=>{l={...l,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>g(),hasHydrated:()=>d,onHydrate:e=>(u.add(e),()=>{u.delete(e)}),onFinishHydration:e=>(m.add(e),()=>{m.delete(e)})},l.skipHydration||g(),a||b}},1277:(e,r,t)=>{"use strict";t.d(r,{A:()=>i});var s=t(9827),n=t(709);let i=(0,s.v)()((0,n.Zr)(e=>({user:null,setUser:r=>e({user:r}),removeUser:()=>e({user:null}),changeOrg:r=>e(e=>e.user?{user:{...e.user,current_org:r}}:e)}),{name:"user-session",storage:(0,n.KU)(()=>localStorage)}))},1381:(e,r,t)=>{"use strict";t.d(r,{A2:()=>o,Aj:()=>l,gK:()=>a,sX:()=>n,wz:()=>i});var s=t(1277);async function n(e){let{user:r,setUser:t}=s.A.getState(),n={name:e.user.name,current_org:{id:e.id,name:e.name,type:e.type},orgs:Object.keys(e.orgs).map(r=>({id:r,name:e.orgs[r].name,type:e.orgs[r].type}))};n.orgs.unshift(n.current_org),t(n)}function i(){let{user:e}=s.A.getState();if(e)return e}function o(){let{user:e}=s.A.getState();if(e)return e.current_org.type}function a(){let{user:e}=s.A.getState();if(e)return e.current_org}function l(e){let{user:r,changeOrg:t}=s.A.getState();if(!r)return;let n=null;r.orgs.forEach(r=>{r.id===e&&(n=r)}),n&&t(n)}},3071:(e,r,t)=>{"use strict";t.d(r,{Z:()=>d});var s=t(2115),n=t(4617),i=t(2317);let o={...t(7847).f,size:{type:"enum",className:"rt-r-size",values:["1","2","3","4","5"],default:"1",responsive:!0},variant:{type:"enum",className:"rt-variant",values:["surface","classic","ghost"],default:"surface"}};var a=t(3984),l=t(8581);let d=s.forwardRef((e,r)=>{let{asChild:t,className:d,...u}=(0,a.o)(e,o,l.y),m=t?i.bL:"div";return s.createElement(m,{ref:r,...u,className:n("rt-reset","rt-BaseCard","rt-Card",d)})});d.displayName="Card"},4729:(e,r,t)=>{Promise.resolve().then(t.bind(t,9239)),Promise.resolve().then(t.bind(t,3572)),Promise.resolve().then(t.bind(t,4920)),Promise.resolve().then(t.bind(t,6352)),Promise.resolve().then(t.bind(t,8369)),Promise.resolve().then(t.bind(t,5316)),Promise.resolve().then(t.bind(t,6217)),Promise.resolve().then(t.bind(t,8130)),Promise.resolve().then(t.bind(t,987)),Promise.resolve().then(t.bind(t,2098)),Promise.resolve().then(t.bind(t,6195)),Promise.resolve().then(t.bind(t,1601)),Promise.resolve().then(t.bind(t,1119)),Promise.resolve().then(t.bind(t,532)),Promise.resolve().then(t.bind(t,7323)),Promise.resolve().then(t.bind(t,4457)),Promise.resolve().then(t.bind(t,852)),Promise.resolve().then(t.bind(t,1868)),Promise.resolve().then(t.bind(t,3409)),Promise.resolve().then(t.bind(t,5900)),Promise.resolve().then(t.bind(t,2413)),Promise.resolve().then(t.bind(t,8629)),Promise.resolve().then(t.bind(t,2807)),Promise.resolve().then(t.bind(t,1882)),Promise.resolve().then(t.bind(t,8846)),Promise.resolve().then(t.bind(t,9710)),Promise.resolve().then(t.bind(t,6959)),Promise.resolve().then(t.bind(t,4813)),Promise.resolve().then(t.bind(t,6511)),Promise.resolve().then(t.bind(t,2744)),Promise.resolve().then(t.bind(t,7400)),Promise.resolve().then(t.bind(t,2112)),Promise.resolve().then(t.bind(t,824)),Promise.resolve().then(t.bind(t,9186)),Promise.resolve().then(t.bind(t,4152)),Promise.resolve().then(t.bind(t,6737)),Promise.resolve().then(t.bind(t,2647)),Promise.resolve().then(t.bind(t,3394)),Promise.resolve().then(t.bind(t,2181)),Promise.resolve().then(t.bind(t,4174)),Promise.resolve().then(t.t.bind(t,7970,23)),Promise.resolve().then(t.bind(t,691)),Promise.resolve().then(t.bind(t,5860))},5860:(e,r,t)=>{"use strict";t.d(r,{default:()=>P});var s=t(5155),n=t(6046),i=t(2115);let o={Unauthorized:"Invalid username or password"};var a=t(7808),l=t(7453),d=t(3071),u=t(6646),m=t(5169),c=t(1401),h=t(9719),v=t(3394),b=t(3334),g=t(1821),f=t(1381);function P(){let[e,r]=(0,i.useState)(!1),[t,P]=(0,i.useState)(""),p=(0,n.useRouter)();async function y(e){e.preventDefault();let t=new FormData(e.currentTarget),s=await fetch("/api/login",{method:"POST",body:t});if(!s.ok){r(!0),P(o[s.statusText]);return}let n=await s.json();(0,f.sX)(n),p.push("/dashboard")}return(0,s.jsxs)(l.a,{className:"w-xs md:w-sm",children:[(0,s.jsx)(a.A,{visible:e,message:t}),(0,s.jsx)(d.Z,{size:"2",className:"mt-3",children:(0,s.jsx)("form",{onSubmit:y,children:(0,s.jsxs)(u.s,{direction:"column",gap:"3",children:[(0,s.jsx)(m.D,{as:"h3",mb:"4",children:"Login"}),(0,s.jsxs)(c.x,{gap:"1",children:[(0,s.jsx)(h.E,{size:"3",children:"Email"}),(0,s.jsx)(v.Root,{name:"username",size:"2",type:"email",placeholder:"example@domain.com"})]}),(0,s.jsxs)(c.x,{gap:"1",children:[(0,s.jsx)(h.E,{size:"3",children:"Password"}),(0,s.jsx)(v.Root,{name:"password",size:"2",type:"password"})]}),(0,s.jsx)(u.s,{asChild:!0,justify:"between",children:(0,s.jsx)(b.N,{href:"/forgot-password",size:"2",children:"Forgot Password?"})}),(0,s.jsx)(c.x,{gap:"2",mt:"2",children:(0,s.jsx)(g.$,{type:"submit",children:"Login"})})]})})})]})}},6046:(e,r,t)=>{"use strict";var s=t(6658);t.o(s,"usePathname")&&t.d(r,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}})},7808:(e,r,t)=>{"use strict";t.d(r,{A:()=>o});var s=t(5155),n=t(4813),i=t(7365);function o(e){let{visible:r,message:t}=e;return r?(0,s.jsxs)(n.Root,{color:"red",size:"2",children:[(0,s.jsx)(n.Icon,{children:(0,s.jsx)(i.raE,{})}),(0,s.jsx)(n.Text,{children:t||"Error! Please try again."})]}):null}},9827:(e,r,t)=>{"use strict";t.d(r,{v:()=>l});var s=t(2115);let n=e=>{let r;let t=new Set,s=(e,s)=>{let n="function"==typeof e?e(r):e;if(!Object.is(n,r)){let e=r;r=(null!=s?s:"object"!=typeof n||null===n)?n:Object.assign({},r,n),t.forEach(t=>t(r,e))}},n=()=>r,i={setState:s,getState:n,getInitialState:()=>o,subscribe:e=>(t.add(e),()=>t.delete(e))},o=r=e(s,n,i);return i},i=e=>e?n(e):n,o=e=>e,a=e=>{let r=i(e),t=e=>(function(e,r=o){let t=s.useSyncExternalStore(e.subscribe,()=>r(e.getState()),()=>r(e.getInitialState()));return s.useDebugValue(t),t})(r,e);return Object.assign(t,r),t},l=e=>e?a(e):a}},e=>{var r=r=>e(e.s=r);e.O(0,[105,209,296,963,533,915,441,587,358],()=>r(4729)),_N_E=e.O()}]);